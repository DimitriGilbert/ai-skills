# Convex Getting Started Guide

This guide covers everything you need to get started with Convex, from installation to your first deployed application.

---

## Table of Contents

1. [What is Convex?](#what-is-convex)
2. [Installation](#installation)
3. [Project Initialization](#project-initialization)
4. [Project Structure](#project-structure)
5. [Your First Query](#your-first-query)
6. [Your First Mutation](#your-first-mutation)
7. [Connecting Frontend](#connecting-frontend)
8. [Development Workflow](#development-workflow)
9. [Quickstart Templates](#quickstart-templates)

---

## What is Convex?

Convex is a **full-stack reactive database platform** that combines:

- **Database** - Document-based data storage
- **Backend Functions** - Serverless queries, mutations, and actions
- **Real-time Updates** - Automatic data synchronization
- **Type Safety** - End-to-end TypeScript types
- **File Storage** - Built-in file management
- **Authentication** - Easy integration with auth providers

With Convex, you don't need separate services for database, backend, real-time subscriptions, or file storage - it's all included.

---

## Installation

### Prerequisites

- Node.js 18+ installed
- npm, yarn, or pnpm package manager
- Basic knowledge of TypeScript

### Install Convex

**For a new project:**

```bash
npm create convex@latest
```

**For an existing project:**

```bash
npm install convex
```

---

## Project Initialization

### Create a New Project

The interactive CLI will guide you through setup:

```bash
npm create convex@latest
```

**Setup options:**

1. **Choose frontend framework:**
   - React (Vite)
   - Next.js
   - TanStack Start
   - SvelteKit
   - Vue

2. **Enable authentication (optional):**
   - Convex Auth (built-in)
   - Clerk
   - Auth0
   - Firebase
   - None

3. **Project name and location**

### Initialize Development Environment

After project creation, start the development server:

```bash
npx convex dev
```

This command will:

- Create a Convex project in the dashboard
- Generate your `convex/_generated` files
- Start watching for file changes
- Provide a local development URL

---

## Project Structure

### Directory Layout

```
my-convex-app/
├── convex/
│   ├── _generated/
│   │   ├── api.ts
│   │   ├── dataModel.ts
│   │   └── types.ts
│   ├── schema.ts
│   ├── auth.config.ts
│   └── functions/
│       ├── messages.ts
│       └── users.ts
├── src/
│   ├── App.tsx
│   ├── main.tsx
│   └── convex/
│       └── client.ts
├── package.json
├── tsconfig.json
└── convex.json
```

### Key Files Explained

**`convex/schema.ts`** - Database schema definition

```typescript
import { defineSchema, defineTable } from "convex/server";
import { v } from "convex/values";

export default defineSchema({
  messages: defineTable({
    body: v.string(),
    author: v.string(),
    timestamp: v.number()
  })
});
```

**`convex/functions/messages.ts`** - Server functions

```typescript
import { query, mutation } from "./_generated/server";
import { v } from "convex/values";

export const list = query({
  handler: async (ctx) => {
    return await ctx.db.query("messages").collect();
  }
});

export const send = mutation({
  args: {
    body: v.string(),
    author: v.string()
  },
  handler: async (ctx, args) => {
    await ctx.db.insert("messages", {
      ...args,
      timestamp: Date.now()
    });
  }
});
```

**`convex/_generated/api.ts`** - Auto-generated API (DO NOT EDIT)

```typescript
// This file is automatically generated
export const api = {
  messages: {
    list: /* ... */,
    send: /* ... */
  }
};
```

---

## Your First Query

### Define a Query Function

Create `convex/functions/messages.ts`:

```typescript
import { query } from "./_generated/server";

export const list = query({
  // No args needed for this query
  handler: async (ctx) => {
    // Query the messages table
    const messages = await ctx.db.query("messages").collect();

    // Return results
    return messages;
  }
});
```

### Query Features

- **Read-only** - Can only read from database
- **Pure functions** - No side effects
- **Reactive** - Auto-update when data changes
- **Type-safe** - Full TypeScript support

### Query Methods

```typescript
// Get all documents
const all = await ctx.db.query("messages").collect();

// Get first result
const first = await ctx.db.query("messages").first();

// Get unique result (throws if not unique)
const unique = await ctx.db.query("messages").unique();

// Paginate results
const page = await ctx.db.query("messages").paginate({
  numItems: 50
});
```

---

## Your First Mutation

### Define a Mutation Function

```typescript
import { mutation } from "./_generated/server";
import { v } from "convex/values";

export const send = mutation({
  // Define input validation
  args: {
    body: v.string(),
    author: v.string()
  },
  handler: async (ctx, args) => {
    // Insert into database
    const messageId = await ctx.db.insert("messages", {
      body: args.body,
      author: args.author,
      timestamp: Date.now()
    });

    return messageId;
  }
});
```

### Mutation Features

- **Write operations** - Insert, update, delete
- **Transactional** - ACID guarantees
- **Validation** - Type-safe args
- **Auto-invalidate** - Triggers query updates

### Mutation Operations

```typescript
// Insert document
const id = await ctx.db.insert("messages", {
  body: "Hello!",
  author: "Alice"
});

// Update document
await ctx.db.patch(messageId, { body: "Updated!" });

// Replace document
await ctx.db.replace(messageId, { body: "Replaced!" });

// Delete document
await ctx.db.delete(messageId);
```

---

## Connecting Frontend

### React Setup

**1. Create Convex client:**

```typescript
// convex/client.ts
import { ConvexReactClient } from "convex/react";

const convex = new ConvexReactClient(
  import.meta.env.VITE_CONVEX_URL!
);

export default convex;
```

**2. Wrap your app:**

```typescript
// main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { ConvexProvider } from 'convex/react';
import convex from './convex/client';
import App from './App';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ConvexProvider client={convex}>
      <App />
    </ConvexProvider>
  </React.StrictMode>
);
```

**3. Use queries and mutations:**

```typescript
// App.tsx
import { useQuery, useMutation } from "convex/react";
import { api } from "../convex/_generated/api";

export default function App() {
  const messages = useQuery(api.messages.list);
  const sendMessage = useMutation(api.messages.send);

  if (messages === undefined) {
    return <div>Loading...</div>;
  }

  return (
    <div>
      <h1>Messages</h1>
      {messages.map((message) => (
        <div key={message._id}>
          <strong>{message.author}:</strong> {message.body}
        </div>
      ))}

      <form onSubmit={(e) => {
        e.preventDefault();
        const formData = new FormData(e.currentTarget);
        sendMessage({
          body: formData.get("message") as string,
          author: "You"
        });
      }}>
        <input name="message" placeholder="Type a message..." />
        <button type="submit">Send</button>
      </form>
    </div>
  );
}
```

### Next.js Setup

**App Router:**

```typescript
// app/ConvexClientProvider.tsx
"use client";

import { ConvexProvider, ConvexReactClient } from "convex/react";
import { ReactNode } from "react";

const convex = new ConvexReactClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

export function ConvexClientProvider({ children }: { children: ReactNode }) {
  return (
    <ConvexProvider client={convex}>
      {children}
    </ConvexProvider>
  );
}
```

```typescript
// app/layout.tsx
import { ConvexClientProvider } from "./ConvexClientProvider";

export default function RootLayout({
  children,
}: {
  children: ReactNode;
}) {
  return (
    <html>
      <body>
        <ConvexClientProvider>
          {children}
        </ConvexClientProvider>
      </body>
    </html>
  );
}
```

---

## Development Workflow

### Development Commands

```bash
# Start development server
npx convex dev

# View logs
npx convex dev --logs

# Run a specific function
npx convex run functionName --args '{"key": "value"}'

# Generate types
npx convex dev --generate
```

### How Development Works

1. **Write code** - Edit functions or schema in `convex/` folder
2. **Auto-generate types** - TypeScript types are automatically updated
3. **Test locally** - Changes are immediately available
4. **Real-time updates** - Frontend automatically receives data updates

### Environment Variables

**Create `.env.local`:**

```bash
# For development (automatically set by npx convex dev)
VITE_CONVEX_URL=http://localhost:3210
# or for Next.js
NEXT_PUBLIC_CONVEX_URL=http://localhost:3210
```

---

## Quickstart Templates

### React + Vite

```bash
npm create convex@latest -- -t react
```

**Features:**
- Vite for fast development
- React 18 with hooks
- Pre-configured Convex client
- Example chat application

### Next.js

```bash
npm create convex@latest -- -t nextjs
```

**Features:**
- App Router support
- Server Components
- Data preloading
- API routes integration

### TanStack Start

```bash
npm create convex@latest -- -t tanstack-start
```

**Features:**
- TanStack Router
- TanStack Query integration
- Modern React framework
- Type-safe routing

### SvelteKit

```bash
npm create convex@latest -- -t svelte
```

**Features:**
- Svelte stores
- File-based routing
- Svelte integration

---

## Next Steps

### Learn More

1. **Core Concepts** - Understand queries, mutations, and actions
2. **Database Schema** - Define your data model
3. **Authentication** - Add user authentication
4. **File Storage** - Handle file uploads
5. **Deployment** - Deploy to production

### Build Your First App

Try building:

- **Chat app** - Real-time messaging
- **Todo list** - CRUD operations
- **Blog** - Content management
- **Dashboard** - Data visualization

### Common Patterns

- **Pagination** - Handle large datasets
- **Search** - Full-text search
- **Relationships** - Connect data models
- **Permissions** - Secure your app

---

## Troubleshooting

### Common Issues

**"Cannot find module './_generated/api'**

Run: `npx convex dev`

**"Query returned undefined"**

Queries return `undefined` while loading. Handle this state:

```typescript
const messages = useQuery(api.messages.list);
if (messages === undefined) {
  return <div>Loading...</div>;
}
```

**"Mutation failed"**

Check console for error messages. Common causes:
- Invalid argument types
- Missing required fields
- Schema validation errors

**Development server won't start**

Try:
```bash
rm -rf convex/_generated
npx convex dev
```

---

## Resources

- **Official Docs:** https://docs.convex.dev
- **Tutorial:** https://docs.convex.dev/tutorial
- **Examples:** https://github.com/get-convex/convex-js/tree/main/examples
- **Discord:** https://convex.dev/discord
- **Twitter:** @ConvexDev

---

**Ready to build something amazing? Start with `npm create convex@latest` and check out the [Core Concepts](./convex-core-concepts.md) guide next!**
